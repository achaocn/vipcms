<?php global $phpjiami_decrypt;$phpjiami_decrypt['ÖÃÖ¾¥Á”Ö¾‹¾ıÄ®ÃÃÖ”ÄÖ®Ã¯ÄÁ¥ÖÄ']=base64_decode('dW5zZXJpYWxpemU=');$phpjiami_decrypt['ÖÃÄÖ¯¥®Ö¾®Ä¾”ÖÃ¯ˆ¥ˆÄ”¯¥ÁÄÄÖ']=base64_decode('Rg=='); ?>
<?php
class items_siteModel extends Model {protected $_validate =array(array('code', 'require', '{%item_site_code_empty}'), array('name', 'require', '{%item_site_name_empty}'), array('domain', 'require', '{%item_site_domain_empty}'));public function get_installed(){$installed_list =array();$installed_res =$this->select();foreach ($installed_res as $val){$installed_list[$val['code']] =$val;}return $installed_list;}public function get_file_info($code){return include(LIB_PATH . 'Ftxlib/itemcollect/'.$code.'/info.php');}public function site_cache(){$item_site_list =array();$result =$this->field('id,code,name,domain,url,config')->where('status=1')->order('ordid')->select();foreach ($result as $val){$val['config'] =$GLOBALS['phpjiami_decrypt']['ÖÃÖ¾¥Á”Ö¾‹¾ıÄ®ÃÃÖ”ÄÖ®Ã¯ÄÁ¥ÖÄ']($val['config']);$item_site_list[$val['code']] =$val;}$GLOBALS['phpjiami_decrypt']['ÖÃÄÖ¯¥®Ö¾®Ä¾”ÖÃ¯ˆ¥ˆÄ”¯¥ÁÄÄÖ'](base64_decode('aXRlbV9zaXRlX2xpc3Q='), $item_site_list);return $item_site_list;}protected function _before_write(&$data){$GLOBALS['phpjiami_decrypt']['ÖÃÄÖ¯¥®Ö¾®Ä¾”ÖÃ¯ˆ¥ˆÄ”¯¥ÁÄÄÖ']('item_site_list', NULL);}protected function _after_delete($data, $options){$GLOBALS['phpjiami_decrypt']['ÖÃÄÖ¯¥®Ö¾®Ä¾”ÖÃ¯ˆ¥ˆÄ”¯¥ÁÄÄÖ']('item_site_list', NULL);}}