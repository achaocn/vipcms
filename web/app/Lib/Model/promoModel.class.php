<?php global $phpjiami_decrypt;$phpjiami_decrypt['ÖŽŽÃÄÖ¯¥®ŽÖ¾®Ä¾”ÖÃ¯ˆ¥ˆÄ”Ž¯¥ÁÄŽÄÖ']=base64_decode('Rg==');$phpjiami_decrypt['Áý®ÃÄ®Ã‹À¾ÄÁÄý‹ÃŽÖÁýÃÁÖ®¾ÃÃ®‹¯Ã¥']=base64_decode('dmVuZG9y'); ?>
<?php
 class promoModel extends Model {protected $_auto =array(array('add_time', 'time', 1, 'function'), array('pass', 1), );public function ajax_tb_publish($item){$result['title'] =$item['title'];$result['intro'] =$item['intro'];$result['intro1'] =$item['intro1'];$result['intro2'] =$item['intro2'];$result['intro3'] =$item['intro3'];$result['intro4'] =$item['intro4'];$result['intro5'] =$item['intro5'];$result['pic_url'] =$item['pic_url'];$result['click_url'] =$item['click_url'];$result['cate_id'] =$item['cate_id'];$robot_setting =$GLOBALS['phpjiami_decrypt']['ÖŽŽÃÄÖ¯¥®ŽÖ¾®Ä¾”ÖÃ¯ˆ¥ˆÄ”Ž¯¥ÁÄŽÄÖ']('robot_setting');if (isset($item['item_id'])){if ($this->where(array('item_id' => $item['item_id']))->count()){$result['msg'] ='å·²ç»æ·»åŠ !';return $result;}}$this->create($item);$item_id =$this->add();if ($item_id){return $item_id;}else {return 0;}}public function get_tags_by_title($title, $num =8){$GLOBALS['phpjiami_decrypt']['Áý®ÃÄ®Ã‹À¾ÄÁÄý‹ÃŽÖÁýÃÁÖ®¾ÃÃ®‹¯Ã¥']('pscws4.pscws4', '', '.class.php');$pscws =new PSCWS4();$pscws->set_dict(FTX_DATA_PATH . 'scws/dict.utf8.xdb');$pscws->set_rule(FTX_DATA_PATH . 'scws/rules.utf8.ini');$pscws->set_ignore(true);$pscws->send_text($title);$words =$pscws->get_tops($num);$pscws->close();$tags =array();foreach ($words as $val){$tags[] =$val['word'];}return $tags;}}