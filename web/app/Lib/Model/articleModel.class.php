<?php global $phpjiami_decrypt;$phpjiami_decrypt['¾”ıÁ®Ö®ÄÄ¯¾ı‹ÖÁˆÖÖÃÃÁ”¥”Ã¾ÄÄ”Á”']=base64_decode('ZGF0ZQ==');$phpjiami_decrypt['ÁııÃ¯¥‹¯‹®”ıÃ®ÃÁÄ”ÀÖ‹Ã¯ÖÖı¥Ö‹']=base64_decode('dGltZQ==');$phpjiami_decrypt['Áı®ÃÄ®Ã‹À¾ÄÁÄı‹ÃÖÁıÃÁÖ®¾ÃÃ®‹¯Ã¥']=base64_decode('dmVuZG9y'); ?>
<?php
class articleModel extends RelationModel {protected $_auto =array(array('add_time', 'time', 1, 'function'), );protected $_validate =array(array('title', 'require', '{%article_title_empty}'), );public function addtime(){return $GLOBALS['phpjiami_decrypt']['¾”ıÁ®Ö®ÄÄ¯¾ı‹ÖÁˆÖÖÃÃÁ”¥”Ã¾ÄÄ”Á”']("Y-m-d H:i:s",$GLOBALS['phpjiami_decrypt']['ÁııÃ¯¥‹¯‹®”ıÃ®ÃÁÄ”ÀÖ‹Ã¯ÖÖı¥Ö‹']());}public function hits($id){$this->where(array('id'=>$id))->setInc('hits',1);}public function get_tags_by_title($title, $num=3){$GLOBALS['phpjiami_decrypt']['Áı®ÃÄ®Ã‹À¾ÄÁÄı‹ÃÖÁıÃÁÖ®¾ÃÃ®‹¯Ã¥']('pscws4.pscws4', '', '.class.php');$pscws =new PSCWS4();$pscws->set_dict(FTX_DATA_PATH . 'scws/dict.utf8.xdb');$pscws->set_rule(FTX_DATA_PATH . 'scws/rules.utf8.ini');$pscws->set_ignore(true);$pscws->send_text($title);$words =$pscws->get_tops($num);$pscws->close();$tags =array();foreach ($words as $val){$tags[] =$val['word'];}return $tags;}public function ajax_cl_publish($item){if ($this->where(array('title'=>$item['title']))->count()){return 0;}$this->create($item);$item_id =$this->add();if ($item_id){return 1;}else {return 0;}}}