<?php global $phpjiami_decrypt;$phpjiami_decrypt['ý®”ýÁÁ®ŽÁÁ¥¾ÃÄ®¯¯®Ã”¥Ž®ˆ¥Ö‹¥Ä”À®']=base64_decode('cHJlZ19tYXRjaA==');$phpjiami_decrypt['”‹¥Ö¯ÖŽ‹ýÁ®ÖÀ®¾¾ÄÖˆ®ÄŽ¯”ý¾‹¾ÄÃýÃ']=base64_decode('aW50dmFs');$phpjiami_decrypt['Ä¥”¥ÄÖÃýˆÃ¯¯ÖÃÖÖˆÃý¾®¯Ã®”Á¾ÃÄ‹¯‹']=base64_decode('cGFyc2VfdXJs');$phpjiami_decrypt['”ÖÖÄ‹¾Ä¾¯ÃÖ¾ÖÁÖÃÀŽ‹ÀÃ”¾Ã®Ö””ˆÖÄŽ']=base64_decode('ZXhwbG9kZQ==');$phpjiami_decrypt['ýˆ¯ÃÀÖÃÃÖÄÖŽÃÁ”¯ÖÀ‹ÖÖ®‹À¥À¥ˆˆ¥ÄÃ']=base64_decode('YXJyYXlfc2xpY2U=');$phpjiami_decrypt['ÃÁ¥ÃÖÄˆ®Ö¾¾‹¯ÄˆŽÖŽÖÁ”Ö¥¯¯Ä¾ÀˆÄŽˆ']=base64_decode('aW1wbG9kZQ=='); ?>
<?php
 class items_origModel extends Model{public function get_id_by_url($url){$rs =$GLOBALS['phpjiami_decrypt']['ý®”ýÁÁ®ŽÁÁ¥¾ÃÄ®¯¯®Ã”¥Ž®ˆ¥Ö‹¥Ä”À®']("/^(http:\/\/|https:\/\/)/", $url, $match);if ($GLOBALS['phpjiami_decrypt']['”‹¥Ö¯ÖŽ‹ýÁ®ÖÀ®¾¾ÄÖˆ®ÄŽ¯”ý¾‹¾ÄÃýÃ']($rs)== 0){$url ="http://" . $url;}$rs =$GLOBALS['phpjiami_decrypt']['Ä¥”¥ÄÖÃýˆÃ¯¯ÖÃÖÖˆÃý¾®¯Ã®”Á¾ÃÄ‹¯‹']($url);$scheme =isset($rs['scheme'])? $rs['scheme'] . "://" : "http://";$host =isset($rs['host'])? $rs['host'] : "none";$host =$GLOBALS['phpjiami_decrypt']['”ÖÖÄ‹¾Ä¾¯ÃÖ¾ÖÁÖÃÀŽ‹ÀÃ”¾Ã®Ö””ˆÖÄŽ']('.', $host);$host =$GLOBALS['phpjiami_decrypt']['ýˆ¯ÃÀÖÃÃÖÄÖŽÃÁ”¯ÖÀ‹ÖÖ®‹À¥À¥ˆˆ¥ÄÃ']($host, -2, 2);$domain =$GLOBALS['phpjiami_decrypt']['ÃÁ¥ÃÖÄˆ®Ö¾¾‹¯ÄˆŽÖŽÖÁ”Ö¥¯¯Ä¾ÀˆÄŽˆ']('.', $host);$orig_id =$this->where(array('url' => array('like', '%'.$domain.'%')))->getField('id');return $orig_id;}public function name_exists($name, $id=0){$pk =$this->getPk();$where ="name='" . $name . "'  AND ". $pk ."<>'" . $id . "'";$result =$this->where($where)->count($pk);if ($result){return true;}else {return false;}}}