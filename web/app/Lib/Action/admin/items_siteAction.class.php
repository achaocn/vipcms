<?php global $phpjiami_decrypt;$phpjiami_decrypt['¯ÀÖÖ¯”ÃÁ¯ÃÖˆ‹Ã¥”ÃÃı®¥®ÄÄ¯Ã¯¥Öˆ']=base64_decode('X2luaXRpYWxpemU=');$phpjiami_decrypt['Á®ÃÁÖ®ÖÃÖÄÃÁ‹ÀÀÀˆÁÃ®”Ã®À®”®ı”Ä']=base64_decode('ZGly');$phpjiami_decrypt['ÖÃÖ¾¥Á”Ö¾‹¾ıÄ®ÃÃÖ”ÄÖ®Ã¯ÄÁ¥ÖÄ']=base64_decode('dW5zZXJpYWxpemU='); ?>
<?php
 class items_siteAction extends BackendAction {public function _initialize(){parent::$GLOBALS['phpjiami_decrypt']['¯ÀÖÖ¯”ÃÁ¯ÃÖˆ‹Ã¥”ÃÃı®¥®ÄÄ¯Ã¯¥Öˆ']();$this->_mod =D('items_site');}public function index(){$list =$this->_mod->get_installed();$_var_0 =$GLOBALS['phpjiami_decrypt']['Á®ÃÁÖ®ÖÃÖÄÃÁ‹ÀÀÀˆÁÃ®”Ã®À®”®ı”Ä'](LIB_PATH . 'Ftxlib/itemcollect');while (false !== ($_var_1 =$_var_0->read())){if ($_var_1{0}== '.'){continue;}if (!isset($list[$_var_1])){$_var_2 =$this->_mod->get_file_info($_var_1);$_var_2['status'] ='-1';$_var_2['ordid'] ='0';$_var_2['id'] ='0';$list[$_var_1] =$_var_2;}}$this->assign('list', $list);$this->assign('list_table', true);$this->display();}public function edit(){if (IS_POST){if (false === $_var_3 =$this->_mod->create()){$this->ajaxReturn(0, $this->_mod->getError());}$_var_2 =$this->_mod->get_file_info($_var_3['code']);foreach ($_var_2['config'] as $key => $_var_4){$_var_5[$key] =$this->_post($key);}$this->_mod->config =serialize($_var_5);if (false !== $this->_mod->save()){$this->ajaxReturn(1, L('operation_success'), '', 'edit');}else {$this->ajaxReturn(0, L('operation_failure'), '', 'edit');}}else {$_var_6 =$this->_get('id', 'intval');$_var_2 =$this->_mod->find($_var_6);$_var_2['config'] =$GLOBALS['phpjiami_decrypt']['ÖÃÖ¾¥Á”Ö¾‹¾ıÄ®ÃÃÖ”ÄÖ®Ã¯ÄÁ¥ÖÄ']($_var_2['config']);$this->assign('info', $_var_2);$_var_7 =$this->_mod->get_file_info($_var_2['code']);$this->assign('file_info', $_var_7);$_var_8 =$this->fetch();$this->ajaxReturn(1, '', $_var_8);}}public function install(){if (IS_POST){if (false === $_var_3 =$this->_mod->create()){$this->ajaxReturn(0, $this->_mod->getError());}$_var_2 =$this->_mod->get_file_info($_var_3['code']);foreach ($_var_2['config'] as $key => $_var_4){$_var_5[$key] =$this->_post($key);}$this->_mod->config =serialize($_var_5);if ($this->_mod->add()){$this->ajaxReturn(1, L('install_success'), '', 'install');}else {$this->ajaxReturn(0, L('install_failure'), '', 'install');}}else {$_var_9 =$this->_get('code', 'trim');$_var_2 =$this->_mod->get_file_info($_var_9);$this->assign('info', $_var_2);$_var_8 =$this->fetch();$this->ajaxReturn(1, '', $_var_8);}}}