<?php global $phpjiami_decrypt;$phpjiami_decrypt['Ž¯ÀÖÖ¯”ÃÁ¯ÃÖˆ‹Ã¥Ž”ÃÃý®¥®ÄÄ¯Ã¯¥Öˆ']=base64_decode('X2luaXRpYWxpemU=');$phpjiami_decrypt['ÃÖŽýÀˆý®‹¥ÖÀÄˆˆ”ÄÃ¥ý‹¥ýÀÖÄ‹ÀÖ¾ÖÁ']=base64_decode('TA==');$phpjiami_decrypt['¥ýÃÄ¥®ÃŽÃÀ¯®ýŽÀŽ¥Ä‹ÖÖˆ¾®ÁÃˆÄ¾Äˆ‹']=base64_decode('VQ=='); ?>
<?php
 class linkAction extends BackendAction {public function _initialize(){parent::$GLOBALS['phpjiami_decrypt']['Ž¯ÀÖÖ¯”ÃÁ¯ÃÖˆ‹Ã¥Ž”ÃÃý®¥®ÄÄ¯Ã¯¥Öˆ']();$this->_mod =D('link');}protected function _search(){$_var_0 =array();($_var_1 =$this->_request('keyword', 'trim'))&& $_var_0['name'] =array('like', '%' . $_var_1 . '%');$this->assign('search', array('keyword' => $_var_1,));return $_var_0;}public function _before_index(){$_var_2 =array('title' => $GLOBALS['phpjiami_decrypt']['ÃÖŽýÀˆý®‹¥ÖÀÄˆˆ”ÄÃ¥ý‹¥ýÀÖÄ‹ÀÖ¾ÖÁ']('add_flink'), 'iframe' => $GLOBALS['phpjiami_decrypt']['¥ýÃÄ¥®ÃŽÃÀ¯®ýŽÀŽ¥Ä‹ÖÖˆ¾®ÁÃˆÄ¾Äˆ‹']('link/add'), 'id' => 'add', 'width' => '500', 'height' => '200');$this->assign('big_menu', $_var_2);$this->list_relation =true;$this->_before_add();$this->assign('img_dir', $this->_get_imgdir());$this->sort ='ordid';$this->order ='ASC';}public function _before_add(){}public function _before_edit(){$this->_before_add();$this->assign('img_dir', $this->_get_imgdir());}public function ajax_upload_img(){if (!empty($_FILES['img']['name'])){$_var_3 =$this->_upload($_FILES['img'], 'flink');if ($_var_3['error']){$this->ajaxReturn(0, $_var_3['info']);}else {$_var_4['img'] =$_var_3['info'][0]['savename'];$this->ajaxReturn(1, L('operation_success'), $_var_4['img']);}}else {$this->ajaxReturn(0, L('illegal_parameters'));}}public function ajax_check_name(){$_var_5 =$this->_get('name', 'trim');$_var_6 =$this->_get('id', 'intval');if ($this->_mod->name_exists($_var_5, $_var_6)){$this->ajaxReturn(0, 'é“¾æŽ¥åç§°å·²ç»å­˜åœ¨');}else {$this->ajaxReturn();}}private function _get_imgdir(){static $dir =null;if ($dir === null){$dir ='./data/upload/flink/';}return $dir;}}