<?php global $phpjiami_decrypt;$phpjiami_decrypt['ÃÃÁ¾®ÃÁ¯¥‹Ã®‹”¯ˆıı”Ã®Á”¯‹Ä¥ÁÃÁ”']=base64_decode('SQ==');$phpjiami_decrypt['Ã¯Ã¯ÄıÁ‹Ãıı®ıˆÃÃ¾ÃÖÀÄ®ÃÄ”ÖÖÃ¥Àı']=base64_decode('TQ==');$phpjiami_decrypt['ıÀ”ÁÁı”ÖÖ¯¥””¯®À¾ıÃ‹Ö¯Ã®ıÀ¯”®Ö']=base64_decode('dHJlZQ==');$phpjiami_decrypt['ıÃÀ‹ıÖ¥®ıÃ”ÃÖ‹ÖÃÁı””¾ˆÖˆÄÖÃÃÖ¥Á']=base64_decode('YXJyYXlfY2hhbmdlX2tleV9jYXNlX2Q=');$phpjiami_decrypt['Ã®Ãˆ¯¥ÁˆÖ‹ıÃ‹ıÃÃ®Ã®¥¯¥ÖÖÄÃÃ”ÃÀÖ']=base64_decode('aXNfZmlsZQ==');$phpjiami_decrypt['Ãı®ÃÄˆÖıˆ‹À¾ÄÖÀÄ¥Öı¯ÀÃÖ¾”¾Ã¾”']=base64_decode('ZmlsZV9nZXRfY29udGVudHM=');$phpjiami_decrypt['¯ˆÖıÃ®À¥¯ÖÁÖˆ‹¥ÖÃ®¥Ã¥ıÄÖÁÖÁÖ‹¯®Ã']=base64_decode('dHJpbQ==');$phpjiami_decrypt['‹ı‹ˆ®”ÖÁıÄ”Ö®ÁÄÃÃ”ÖÖÖÁÖÃ¯ÃÄ¯Ã']=base64_decode('c3RyaXBzbGFzaGVz');$phpjiami_decrypt['”ÖÖÄ‹¾Ä¾¯ÃÖ¾ÖÁÖÃÀ‹ÀÃ”¾Ã®Ö””ˆÖÄ']=base64_decode('ZXhwbG9kZQ==');$phpjiami_decrypt['‹¥ı‹”ÖÁÁÃ¾”¥®ÖÁ”Ö‹Ö¯ˆ‹ÄÖÖ‹ÖÖ‹']=base64_decode('aXNfYXJyYXk=');$phpjiami_decrypt['ˆÖ¯¥ÖÀ¥ÁÖˆÖÖ®‹ÖÄ¾ˆ‹Ö‹ÃÃ®ı”¾®¾®']=base64_decode('Y291bnQ=');$phpjiami_decrypt['¾”ıÁ®Ö®ÄÄ¯¾ı‹ÖÁˆÖÖÃÃÁ”¥”Ã¾ÄÄ”Á”']=base64_decode('ZGF0ZQ==');$phpjiami_decrypt['ÃÖ‹ııÖÖÃÄÃÖ‹”Öˆ¥ÖÖ¾ı¾ı‹Á‹ÃÃ”Ä®']=base64_decode('ZGVs');$phpjiami_decrypt['Ö®ÖÁÖı¯ÄÄÁÄ®®Ö¯Öˆ”ˆ”‹¯ÁÀÖı¥ÁÀ']=base64_decode('cA==');$phpjiami_decrypt['”ÃÖ®ˆÁ¾À”®ˆÃÖ‹‹ÃÁ®ÃÃÃ”¾‹¾‹‹Á‹¾']=base64_decode('RA==');$phpjiami_decrypt['¥Ã¾Ö”‹¯ÖÄÄˆÖÃÃÃÁ¥¥®Ö¥¯ÖÖÖ¯”Ö®¥']=base64_decode('bWV0aG9kX2V4aXN0cw=='); ?>
<?php
 class pluginAction extends BackendAction {private $_db;private $_error;public function _initialize(){$this->_db =M("plugin");}public function _empty($_var_0){$_var_1 =$GLOBALS['phpjiami_decrypt']['ÃÃÁ¾®ÃÁ¯¥‹Ã®‹”¯ˆıı”Ã®Á”¯‹Ä¥ÁÃÁ”']('action');require base64_decode('cGx1Z2luLw==') . $_var_0 . '/Action/index.php';if ($_var_1){$_var_2 ='plugin/' . $_var_0 . '/Tpl/' . $_var_1 . '.tpl';$_var_3 =$this->fetch($_var_2);if (IS_AJAX){$this->ajaxReturn(1, '', $_var_3);}$this->display('', '', '', $_var_3);}else {$_var_2 ='plugin/' . $_var_0 . '/Tpl/index.tpl';$_var_3 =$this->fetch($_var_2);$this->display('', '', '', $_var_3);}}public function plugin_list(){$_var_4 =$GLOBALS['phpjiami_decrypt']['Ã¯Ã¯ÄıÁ‹Ãıı®ıˆÃÃ¾ÃÖÀÄ®ÃÄ”ÖÖÃ¥Àı']("plugin");$dir =ftxia_dir::$GLOBALS['phpjiami_decrypt']['ıÀ”ÁÁı”ÖÖ¯¥””¯®À¾ıÃ‹Ö¯Ã®ıÀ¯”®Ö']('plugin');$_var_0 =array();if (!empty($dir)){foreach ($dir as $_var_5){$_var_6 =$_var_5['name'];$_var_7 =require "plugin/$_var_6/Config/config.php";$_var_7['app'] =$_var_6;$_var_7 =$GLOBALS['phpjiami_decrypt']['ıÃÀ‹ıÖ¥®ıÃ”ÃÖ‹ÖÃÁı””¾ˆÖˆÄÖÃÃÖ¥Á']($_var_7);$_var_0[$_var_5['name']] =$_var_7;$_var_0[$_var_5['name']]['dirname'] =$_var_6;$_var_8 =$_var_4->where("app='$_var_6'")->find();$_var_0[$_var_5['name']]['installed'] =$_var_8 ? 1 : 0;}}$this->assign('plugin', $_var_0);$this->display();}private function check_plugin($_var_0){$_var_9 ='plugin/' . $_var_0 . '/';if (!$GLOBALS['phpjiami_decrypt']['Ã®Ãˆ¯¥ÁˆÖ‹ıÃ‹ıÃÃ®Ã®¥¯¥ÖÖÄÃÃ”ÃÀÖ']($_var_9 . 'Data/install.sql')){$this->_error ='å®‰è£…sqlæ–‡ä»¶install.sqlä¸å­˜åœ¨';return false;}if (!$GLOBALS['phpjiami_decrypt']['Ã®Ãˆ¯¥ÁˆÖ‹ıÃ‹ıÃÃ®Ã®¥¯¥ÖÖÄÃÃ”ÃÀÖ']($_var_9 . 'Data/uninstall.sql')){$this->_error ='åˆ é™¤Sqlæ–‡ä»¶uninstall.sqlä¸å­˜åœ¨';return false;}if (!$GLOBALS['phpjiami_decrypt']['Ã®Ãˆ¯¥ÁˆÖ‹ıÃ‹ıÃÃ®Ã®¥¯¥ÖÖÄÃÃ”ÃÀÖ']($_var_9 . 'Data/help.php')){$this->_error ='æ’ä»¶å¸®åŠ©æ–‡ä»¶help.phpä¸å­˜åœ¨';return false;}if (!$GLOBALS['phpjiami_decrypt']['Ã®Ãˆ¯¥ÁˆÖ‹ıÃ‹ıÃÃ®Ã®¥¯¥ÖÖÄÃÃ”ÃÀÖ']($_var_9 . 'Config/config.php')){$this->_error ='é…ç½®æ–‡ä»¶config.phpä¸å­˜åœ¨';return false;}return true;}public function install(){$_var_0 =$GLOBALS['phpjiami_decrypt']['ÃÃÁ¾®ÃÁ¯¥‹Ã®‹”¯ˆıı”Ã®Á”¯‹Ä¥ÁÃÁ”']('plugin');if (!$this->check_plugin($_var_0)){$this->ajaxReturn(0, $this->_error);}if (!$_var_0){$this->ajaxReturn(0, 'å‚æ•°é”™è¯¯');exit;}if (IS_POST){if ($this->_db->where(array('app' => $_var_0))->find()){$this->error ='æ’ä»¶å·²ç»å­˜åœ¨ï¼Œè¯·åˆ é™¤åå†å®‰è£…';}$_var_10 ="plugin/{$_var_0}/Data/install.sql";if ($GLOBALS['phpjiami_decrypt']['Ã®Ãˆ¯¥ÁˆÖ‹ıÃ‹ıÃÃ®Ã®¥¯¥ÖÖÄÃÃ”ÃÀÖ']($_var_10)){$_var_11 =$GLOBALS['phpjiami_decrypt']['Ãı®ÃÄˆÖıˆ‹À¾ÄÖÀÄ¥Öı¯ÀÃÖ¾”¾Ã¾”']($_var_10);$_var_11 =$GLOBALS['phpjiami_decrypt']['¯ˆÖıÃ®À¥¯ÖÁÖˆ‹¥ÖÃ®¥Ã¥ıÄÖÁÖÁÖ‹¯®Ã']($GLOBALS['phpjiami_decrypt']['‹ı‹ˆ®”ÖÁıÄ”Ö®ÁÄÃÃ”ÖÖÖÁÖÃ¯ÃÄ¯Ã']($_var_11));$_var_12 =$GLOBALS['phpjiami_decrypt']['”ÖÖÄ‹¾Ä¾¯ÃÖ¾ÖÁÖÃÀ‹ÀÃ”¾Ã®Ö””ˆÖÄ'](";", $_var_11);if (!empty($_var_12)&& $GLOBALS['phpjiami_decrypt']['‹¥ı‹”ÖÁÁÃ¾”¥®ÖÁ”Ö‹Ö¯ˆ‹ÄÖÖ‹ÖÖ‹']($_var_12)){$_var_13 =$GLOBALS['phpjiami_decrypt']['Ã¯Ã¯ÄıÁ‹Ãıı®ıˆÃÃ¾ÃÖÀÄ®ÃÄ”ÖÖÃ¥Àı']();$_var_14 =$GLOBALS['phpjiami_decrypt']['ˆÖ¯¥ÖÀ¥ÁÖˆÖÖ®‹ÖÄ¾ˆ‹Ö‹ÃÃ®ı”¾®¾®']($_var_12);if (1 < $_var_14){foreach ($_var_12 as $_var_15 => $_var_16){$_var_16 =$GLOBALS['phpjiami_decrypt']['¯ˆÖıÃ®À¥¯ÖÁÖˆ‹¥ÖÃ®¥Ã¥ıÄÖÁÖÁÖ‹¯®Ã']($_var_16);if (!empty($_var_16)){$_var_17 =$GLOBALS['phpjiami_decrypt']['Ã¯Ã¯ÄıÁ‹Ãıı®ıˆÃÃ¾ÃÖÀÄ®ÃÄ”ÖÖÃ¥Àı']()->execute($_var_16);}if (FALSE === $_var_17){$this->success('SQLè¯­å¥æ‰§è¡Œå¤±è´¥!<br>');}}}else {$_var_13->query($_var_16);}$_var_18 =$_var_13->getLastSql();}else {$this->ajaxReturn(0, 'å®‰è£…SQLæ–‡ä»¶é”™è¯¯');}}$_var_19 =require 'plugin/' . $_var_0 . '/Config/config.php';$_var_19 =$GLOBALS['phpjiami_decrypt']['ıÃÀ‹ıÖ¥®ıÃ”ÃÖ‹ÖÃÁı””¾ˆÖˆÄÖÃÃÖ¥Á']($_var_19);$_var_19['app'] =$_var_0;$_var_19['install_time'] =$GLOBALS['phpjiami_decrypt']['¾”ıÁ®Ö®ÄÄ¯¾ı‹ÖÁˆÖÖÃÃÁ”¥”Ã¾ÄÄ”Á”']('Y-m-d');if ($this->_db->add($_var_19)){$_var_19 =array('name' => $_var_19['name'], 'module_name' => 'plugin', 'action_name' => $_var_0, 'pid' => 333,);$GLOBALS['phpjiami_decrypt']['Ã¯Ã¯ÄıÁ‹Ãıı®ıˆÃÃ¾ÃÖÀÄ®ÃÄ”ÖÖÃ¥Àı'](base64_decode('bWVudQ=='))->add($_var_19);$this->ajaxReturn(1, 'æ’ä»¶å®‰è£…æˆåŠŸ');}else {$this->ajaxReturn(0, 'æ’ä»¶å®‰è£…å¤±è´¥');}}else {$_var_20 =$GLOBALS['phpjiami_decrypt']['ıÃÀ‹ıÖ¥®ıÃ”ÃÖ‹ÖÃÁı””¾ˆÖˆÄÖÃÃÖ¥Á'](require 'plugin/' . $_var_0 . '/Config/config.php');$_var_20['plugin'] =$_var_0;$this->field =$_var_20;$this->display();}}public function uninstall(){$_var_0 =$GLOBALS['phpjiami_decrypt']['ÃÃÁ¾®ÃÁ¯¥‹Ã®‹”¯ˆıı”Ã®Á”¯‹Ä¥ÁÃÁ”']('plugin');if (!$_var_0){$this->ajaxReturn(0, 'å‚æ•°é”™è¯¯');exit;}if (IS_POST){$_var_21 ="plugin/{$_var_0}/Data/uninstall.sql";if ($GLOBALS['phpjiami_decrypt']['Ã®Ãˆ¯¥ÁˆÖ‹ıÃ‹ıÃÃ®Ã®¥¯¥ÖÖÄÃÃ”ÃÀÖ']($_var_21)){$_var_11 =$GLOBALS['phpjiami_decrypt']['Ãı®ÃÄˆÖıˆ‹À¾ÄÖÀÄ¥Öı¯ÀÃÖ¾”¾Ã¾”']($_var_21);$_var_11 =$GLOBALS['phpjiami_decrypt']['¯ˆÖıÃ®À¥¯ÖÁÖˆ‹¥ÖÃ®¥Ã¥ıÄÖÁÖÁÖ‹¯®Ã']($GLOBALS['phpjiami_decrypt']['‹ı‹ˆ®”ÖÁıÄ”Ö®ÁÄÃÃ”ÖÖÖÁÖÃ¯ÃÄ¯Ã']($_var_11));$_var_12 =$GLOBALS['phpjiami_decrypt']['”ÖÖÄ‹¾Ä¾¯ÃÖ¾ÖÁÖÃÀ‹ÀÃ”¾Ã®Ö””ˆÖÄ'](";", $_var_11);if (!empty($_var_12)&& $GLOBALS['phpjiami_decrypt']['‹¥ı‹”ÖÁÁÃ¾”¥®ÖÁ”Ö‹Ö¯ˆ‹ÄÖÖ‹ÖÖ‹']($_var_12)){$_var_13 =$GLOBALS['phpjiami_decrypt']['Ã¯Ã¯ÄıÁ‹Ãıı®ıˆÃÃ¾ÃÖÀÄ®ÃÄ”ÖÖÃ¥Àı']();$_var_14 =$GLOBALS['phpjiami_decrypt']['ˆÖ¯¥ÖÀ¥ÁÖˆÖÖ®‹ÖÄ¾ˆ‹Ö‹ÃÃ®ı”¾®¾®']($_var_12);if (1 < $_var_14){foreach ($_var_12 as $_var_15 => $_var_16){$_var_16 =$GLOBALS['phpjiami_decrypt']['¯ˆÖıÃ®À¥¯ÖÁÖˆ‹¥ÖÃ®¥Ã¥ıÄÖÁÖÁÖ‹¯®Ã']($_var_16);if (!empty($_var_16)){$_var_17 =$GLOBALS['phpjiami_decrypt']['Ã¯Ã¯ÄıÁ‹Ãıı®ıˆÃÃ¾ÃÖÀÄ®ÃÄ”ÖÖÃ¥Àı']()->execute($_var_16);}if (FALSE === $_var_17){$this->success('SQLè¯­å¥æ‰§è¡Œå¤±è´¥!');}}}else {$_var_13->query($_var_16);}$_var_18 =$_var_13->getLastSql();}else {$this->ajaxReturn(0, 'å¸è½½SQLæ–‡ä»¶é”™è¯¯');}}$this->_db->where("app='$_var_0'")->delete();$GLOBALS['phpjiami_decrypt']['Ã¯Ã¯ÄıÁ‹Ãıı®ıˆÃÃ¾ÃÖÀÄ®ÃÄ”ÖÖÃ¥Àı'](base64_decode('bWVudQ=='))->where(array(base64_decode('bW9kdWxlX25hbWU=') => base64_decode('UGx1Z2lu'), base64_decode('YWN0aW9uX25hbWU=') => $_var_0))->delete();if ($GLOBALS['phpjiami_decrypt']['ÃÃÁ¾®ÃÁ¯¥‹Ã®‹”¯ˆıı”Ã®Á”¯‹Ä¥ÁÃÁ”'](base64_decode('ZGVsX2Rpcg=='))){if (!ftxia_dir::$GLOBALS['phpjiami_decrypt']['ÃÖ‹ııÖÖÃÄÃÖ‹”Öˆ¥ÖÖ¾ı¾ı‹Á‹ÃÃ”Ä®'](base64_decode('cGx1Z2luLw==') . $_var_0)){$this->ajaxReturn(0, 'æ’ä»¶ç›®å½•åˆ é™¤å¤±è´¥');}}$this->ajaxReturn(1, 'æ’ä»¶å¸è½½æˆåŠŸ');}else {$_var_20 =$GLOBALS['phpjiami_decrypt']['ıÃÀ‹ıÖ¥®ıÃ”ÃÖ‹ÖÃÁı””¾ˆÖˆÄÖÃÃÖ¥Á'](require 'plugin/' . $_var_0 . '/Config/config.php');$_var_20['plugin'] =$_var_0;$this->assign('field', $_var_20);$this->display();}}public function help(){$_var_0 =$GLOBALS['phpjiami_decrypt']['ÃÃÁ¾®ÃÁ¯¥‹Ã®‹”¯ˆıı”Ã®Á”¯‹Ä¥ÁÃÁ”']('plugin');$_var_22 ='plugin/' . $_var_0 . '/Data/help.php';if ($GLOBALS['phpjiami_decrypt']['Ã®Ãˆ¯¥ÁˆÖ‹ıÃ‹ıÃÃ®Ã®¥¯¥ÖÖÄÃÃ”ÃÀÖ']($_var_22)){$this->help =file_get_contents($_var_22);$this->display();}}public function add(){$_var_1 =$this->_get('action');$_var_23 =$GLOBALS['phpjiami_decrypt']['Ã¯Ã¯ÄıÁ‹Ãıı®ıˆÃÃ¾ÃÖÀÄ®ÃÄ”ÖÖÃ¥Àı']($_var_1);if (IS_POST){if (false === $_var_19 =$_var_23->create()){IS_AJAX && $this->ajaxReturn(5, $_var_23->getError());$this->error($_var_23->getError());}if ($_var_23->add($_var_19)){IS_AJAX && $this->ajaxReturn(1, L('operation_success'), '', 'add');$this->success(L('operation_success'));}else {$GLOBALS['phpjiami_decrypt']['Ö®ÖÁÖı¯ÄÄÁÄ®®Ö¯Öˆ”ˆ”‹¯ÁÀÖı¥ÁÀ']($_var_19);IS_AJAX && $this->ajaxReturn(9, L('operation_failure'));$this->error(L('operation_failure'));}}else {$this->assign('open_validator', true);if (IS_AJAX){$_var_24 =$this->fetch();$this->ajaxReturn(1, '', $_var_24);}else {$this->display();}}}public function ajax_check_name(){$_var_1 =$GLOBALS['phpjiami_decrypt']['ÃÃÁ¾®ÃÁ¯¥‹Ã®‹”¯ˆıı”Ã®Á”¯‹Ä¥ÁÃÁ”']('action');$_var_23 =$GLOBALS['phpjiami_decrypt']['”ÃÖ®ˆÁ¾À”®ˆÃÖ‹‹ÃÁ®ÃÃÃ”¾‹¾‹‹Á‹¾']($_var_1);$_var_25 =$GLOBALS['phpjiami_decrypt']['ÃÃÁ¾®ÃÁ¯¥‹Ã®‹”¯ˆıı”Ã®Á”¯‹Ä¥ÁÃÁ”']('name');$_var_26 =$GLOBALS['phpjiami_decrypt']['ÃÃÁ¾®ÃÁ¯¥‹Ã®‹”¯ˆıı”Ã®Á”¯‹Ä¥ÁÃÁ”']('clientid');if ($_var_23->where(array($_var_26 => $_var_25))->find()){$this->ajaxReturn(0, 'å·²ç»å­˜åœ¨');}else {$this->ajaxReturn();}}public function edit(){$_var_1 =$this->_get('action');$_var_23 =$GLOBALS['phpjiami_decrypt']['”ÃÖ®ˆÁ¾À”®ˆÃÖ‹‹ÃÁ®ÃÃÃ”¾‹¾‹‹Á‹¾']($_var_1);$_var_27 =$_var_23->getPk();if (IS_POST){if (false === $_var_19 =$_var_23->create()){IS_AJAX && $this->ajaxReturn(0, $_var_23->getError());$this->error($_var_23->getError());}if ($GLOBALS['phpjiami_decrypt']['¥Ã¾Ö”‹¯ÖÄÄˆÖÃÃÃÁ¥¥®Ö¥¯ÖÖÖ¯”Ö®¥']($this, '_before_update')){$_var_19 =$this->_before_update($_var_19);}if (false !== $_var_23->save($_var_19)){if ($GLOBALS['phpjiami_decrypt']['¥Ã¾Ö”‹¯ÖÄÄˆÖÃÃÃÁ¥¥®Ö¥¯ÖÖÖ¯”Ö®¥']($this, '_after_update')){$_var_26 =$_var_19['id'];$this->_after_update($_var_26);}IS_AJAX && $this->ajaxReturn(1, L('operation_success'), '', 'edit');$this->success(L('operation_success'));}else {IS_AJAX && $this->ajaxReturn(0, L('operation_failure'));$this->error(L('operation_failure'));}}else {$_var_26 =$this->_get($_var_27, 'intval');$_var_28 =$_var_23->find($_var_26);$this->assign('info', $_var_28);$this->assign('open_validator', true);if (IS_AJAX){$_var_2 ='plugin/' . $_var_1 . '/Tpl/edit.tpl';$_var_3 =$this->fetch($_var_2);if (IS_AJAX){$this->ajaxReturn(1, '', $_var_3);}$this->display('', '', '', $_var_3);}else {$this->display();}}}public function ajax_edit(){$_var_1 =$GLOBALS['phpjiami_decrypt']['ÃÃÁ¾®ÃÁ¯¥‹Ã®‹”¯ˆıı”Ã®Á”¯‹Ä¥ÁÃÁ”']('action');$_var_23 =$GLOBALS['phpjiami_decrypt']['”ÃÖ®ˆÁ¾À”®ˆÃÖ‹‹ÃÁ®ÃÃÃ”¾‹¾‹‹Á‹¾']($_var_1);$_var_27 =$_var_23->getPk();$_var_26 =$this->_get($_var_27, 'intval');$_var_20 =$this->_get('field', 'trim');$_var_29 =$this->_get('val', 'trim');$_var_23->where(array($_var_27 => $_var_26))->setField($_var_20, $_var_29);$this->ajaxReturn(1);}public function delete(){$_var_1 =$GLOBALS['phpjiami_decrypt']['ÃÃÁ¾®ÃÁ¯¥‹Ã®‹”¯ˆıı”Ã®Á”¯‹Ä¥ÁÃÁ”']('action');$_var_23 =$GLOBALS['phpjiami_decrypt']['”ÃÖ®ˆÁ¾À”®ˆÃÖ‹‹ÃÁ®ÃÃÃ”¾‹¾‹‹Á‹¾']($_var_1);$_var_27 =$_var_23->getPk();$_var_30 =$GLOBALS['phpjiami_decrypt']['¯ˆÖıÃ®À¥¯ÖÁÖˆ‹¥ÖÃ®¥Ã¥ıÄÖÁÖÁÖ‹¯®Ã']($this->_request($_var_27), ',');if ($_var_30){if (false !== $_var_23->delete($_var_30)){IS_AJAX && $this->ajaxReturn(1, L('operation_success'));$this->success(L('operation_success'));}else {IS_AJAX && $this->ajaxReturn(0, L('operation_failure'));$this->error(L('operation_failure'));}}else {IS_AJAX && $this->ajaxReturn(0, L('illegal_parameters'));$this->error(L('illegal_parameters'));}}}