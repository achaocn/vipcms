<?php global $phpjiami_decrypt;$phpjiami_decrypt['乐织昧弥氓妹ギ哪茂ブ']=base64_decode('X2luaXRpYWxpemU=');$phpjiami_decrypt['弥辆弥昧妹']=base64_decode('RA==');$phpjiami_decrypt['妹卯撩种览隶美']=base64_decode('c3RycG9z');$phpjiami_decrypt['ッ局帜置妹隶ギ芝种之']=base64_decode('bWV0aG9kX2V4aXN0cw==');$phpjiami_decrypt['铸卯昆至ブ卯ッ闹林林']=base64_decode('dHJpbQ==');$phpjiami_decrypt['铸局井弥种弥']=base64_decode('c3Vic3Ry');$phpjiami_decrypt['警种种掷种昧木']=base64_decode('aW5fYXJyYXk=');$phpjiami_decrypt['种灸警弥局林美烂久帜']=base64_decode('ZXhwbG9kZQ==');$phpjiami_decrypt['茂茂凝谬妹久掷漠媚种ダ']=base64_decode('TQ==');$phpjiami_decrypt['卯チ妹卯クブ帜妹美']=base64_decode('aXNfZmlsZQ==');$phpjiami_decrypt['帜种织帜怜览织']=base64_decode('aXNfd3JpdGFibGU=');$phpjiami_decrypt['种ツ妹妹之喇牧笼ブ']=base64_decode('YXJyYXlfbWVyZ2U=');$phpjiami_decrypt['弥之弥氓弥怜闹媚辆']=base64_decode('ZmlsZV9wdXRfY29udGVudHM=');$phpjiami_decrypt['至之聊妹种林茂媚']=base64_decode('c3RyaXBzbGFzaGVz');$phpjiami_decrypt['美置漠之亮弥谰廉至チ']=base64_decode('dmFyX2V4cG9ydA==');$phpjiami_decrypt['茂久志撩怜卯']=base64_decode('dW5saW5r'); ?>
<?php
 class BackendAction extends CommAction {protected $_name ='';protected $menuid =0;public function _initialize(){parent::$GLOBALS['phpjiami_decrypt']['乐织昧弥氓妹ギ哪茂ブ']();$this->_name =$this->getActionName();$this->check_priv();$this->menuid =$this->_request('menuid', 'trim', 0);if ($this->menuid){$_var_0 =$GLOBALS['phpjiami_decrypt']['弥辆弥昧妹']('menu')->sub_menu($this->menuid, $this->big_menu);$_var_1 ='';foreach ($_var_0 as $key => $_var_2){$_var_0[$key]['class'] ='';if (MODULE_NAME == $_var_2['module_name'] && ACTION_NAME == $_var_2['action_name'] && $GLOBALS['phpjiami_decrypt']['妹卯撩种览隶美'](__SELF__, $_var_2['data'])){$_var_0[$key]['class'] =$_var_1 ='on';}}if (empty($_var_1)){foreach ($_var_0 as $key => $_var_2){if (MODULE_NAME == $_var_2['module_name'] && ACTION_NAME == $_var_2['action_name']){$_var_0[$key]['class'] ='on';break;}}}$this->assign('sub_menu', $_var_0);}$this->assign('menuid', $this->menuid);}public function index(){$_var_3 =$this->_search();$_var_4 =$GLOBALS['phpjiami_decrypt']['弥辆弥昧妹']($this->_name);!empty($_var_4)&& $this->_list($_var_4, $_var_3);$this->display();}public function add(){$_var_4 =$GLOBALS['phpjiami_decrypt']['弥辆弥昧妹']($this->_name);if (IS_POST){if (false === $_var_5 =$_var_4->create()){IS_AJAX && $this->ajaxReturn(0, $_var_4->getError());$this->error($_var_4->getError());}if ($GLOBALS['phpjiami_decrypt']['ッ局帜置妹隶ギ芝种之']($this, '_before_insert')){$_var_5 =$this->_before_insert($_var_5);}if ($_var_4->add($_var_5)){if ($GLOBALS['phpjiami_decrypt']['ッ局帜置妹隶ギ芝种之']($this, '_after_insert')){$_var_6 =$_var_4->getLastInsID();$this->_after_insert($_var_6);}IS_AJAX && $this->ajaxReturn(1, L('operation_success'), '', 'add');$this->success(L('operation_success'));}else {IS_AJAX && $this->ajaxReturn(0, L('operation_failure'));$this->error(L('operation_failure'));}}else {$this->assign('open_validator', true);if (IS_AJAX){$_var_7 =$this->fetch();$this->ajaxReturn(1, '', $_var_7);}else {$this->display();}}}public function edit(){$_var_4 =$GLOBALS['phpjiami_decrypt']['弥辆弥昧妹']($this->_name);$_var_8 =$_var_4->getPk();if (IS_POST){if (false === $_var_5 =$_var_4->create()){IS_AJAX && $this->ajaxReturn(0, $_var_4->getError());$this->error($_var_4->getError());}if ($GLOBALS['phpjiami_decrypt']['ッ局帜置妹隶ギ芝种之']($this, '_before_update')){$_var_5 =$this->_before_update($_var_5);}if (false !== $_var_4->save($_var_5)){if ($GLOBALS['phpjiami_decrypt']['ッ局帜置妹隶ギ芝种之']($this, '_after_update')){$_var_6 =$_var_5['id'];$this->_after_update($_var_6);}IS_AJAX && $this->ajaxReturn(1, L('operation_success'), '', 'edit');$this->success(L('operation_success'));}else {IS_AJAX && $this->ajaxReturn(0, L('operation_failure'));$this->error(L('operation_failure'));}}else {$_var_6 =$this->_get($_var_8, 'intval');$_var_9 =$_var_4->find($_var_6);$this->assign('info', $_var_9);$this->assign('open_validator', true);if (IS_AJAX){$_var_7 =$this->fetch();$this->ajaxReturn(1, '', $_var_7);}else {$this->display();}}}public function ajax_edit(){$_var_4 =$GLOBALS['phpjiami_decrypt']['弥辆弥昧妹']($this->_name);$_var_8 =$_var_4->getPk();$_var_6 =$this->_get($_var_8, 'intval');$_var_10 =$this->_get('field', 'trim');$_var_2 =$this->_get('val', 'trim');$_var_4->where(array($_var_8 => $_var_6))->setField($_var_10, $_var_2);$this->ajaxReturn(1);}public function delete(){$_var_4 =$GLOBALS['phpjiami_decrypt']['弥辆弥昧妹']($this->_name);$_var_8 =$_var_4->getPk();$_var_11 =$GLOBALS['phpjiami_decrypt']['铸卯昆至ブ卯ッ闹林林']($this->_request($_var_8), ',');if ($_var_11){if (false !== $_var_4->delete($_var_11)){IS_AJAX && $this->ajaxReturn(1, L('operation_success'));$this->success(L('operation_success'));}else {IS_AJAX && $this->ajaxReturn(0, L('operation_failure'));$this->error(L('operation_failure'));}}else {IS_AJAX && $this->ajaxReturn(0, L('illegal_parameters'));$this->error(L('illegal_parameters'));}}protected function _search(){$_var_4 =$GLOBALS['phpjiami_decrypt']['弥辆弥昧妹']($this->_name);$_var_3 =array();foreach ($_var_4->getDbFields()as $key => $_var_2){if ($GLOBALS['phpjiami_decrypt']['铸局井弥种弥']($key, 0, 1)== '_'){continue;}if ($this->_request($_var_2)){$_var_3[$_var_2] =$this->_request($_var_2);}}return $_var_3;}protected function _list($_var_12, $_var_3 =array(), $_var_13 ='', $_var_14 ='', $_var_15 ='*', $_var_16 =100){$_var_17 =$_var_12->getPk();if ($this->_request('sort', 'trim')){$sort =$this->_request('sort', 'trim');}else if (!empty($_var_13)){$sort =$_var_13;}else if ($this->sort){$sort =$this->sort;}else {$sort =$_var_17;}if ($this->_request('order', 'trim')){$_var_18 =$this->_request('order', 'trim');}else if (!empty($_var_14)){$_var_18 =$_var_14;}else if ($this->order){$_var_18 =$this->order;}else {$_var_18 ='DESC';}if ($_var_16){$count =$_var_12->where($_var_3)->count($_var_17);$_var_19 =new Page($count, $_var_16);}$_var_20 =$_var_12->field($_var_15)->where($_var_3)->order($sort . ' ' . $_var_18.',id desc');$this->list_relation && $_var_20->relation(true);if ($_var_16){$_var_20->limit($_var_19->firstRow . ',' . $_var_19->listRows);$_var_21 =$_var_19->show();$this->assign('page', $_var_21);}$list =$_var_20->select();$this->assign('list', $list);$this->assign('list_table', true);}public function check_priv(){if (MODULE_NAME == 'attachment'){return true;}if ((!isset($_SESSION['admin'])|| !$_SESSION['admin'])&& !$GLOBALS['phpjiami_decrypt']['警种种掷种昧木'](ACTION_NAME, array('login', 'verify_code'))){$this->redirect('index/login');}if ($_SESSION['admin']['role_id'] == 1){return true;}if ($GLOBALS['phpjiami_decrypt']['警种种掷种昧木'](MODULE_NAME, $GLOBALS['phpjiami_decrypt']['种灸警弥局林美烂久帜'](',', base64_decode('aW5kZXg=')))){return true;}$_var_22 =$GLOBALS['phpjiami_decrypt']['茂茂凝谬妹久掷漠媚种ダ']('menu');$_var_23 =$_var_22->where(array('module_name' => MODULE_NAME, 'action_name' => ACTION_NAME))->getField('id');$_var_24 =$GLOBALS['phpjiami_decrypt']['弥辆弥昧妹']('admin_auth');$_var_25 =$_var_24->where(array('menu_id' => $_var_23, 'role_id' => $_SESSION['admin']['role_id']))->count();if (!$_var_25){$this->error(L('_VALID_ACCESS_'));}}protected function update_config($_var_26, $_var_27 =''){!$GLOBALS['phpjiami_decrypt']['卯チ妹卯クブ帜妹美']($_var_27)&& $_var_27 =CONF_PATH . 'index/config.php';if ($GLOBALS['phpjiami_decrypt']['帜种织帜怜览织']($_var_27)){$_var_28 =require $_var_27;$_var_28 =$GLOBALS['phpjiami_decrypt']['种ツ妹妹之喇牧笼ブ']($_var_28, $_var_26);$GLOBALS['phpjiami_decrypt']['弥之弥氓弥怜闹媚辆']($_var_27, '<?php 
return ' . $GLOBALS['phpjiami_decrypt']['至之聊妹种林茂媚']($GLOBALS['phpjiami_decrypt']['美置漠之亮弥谰廉至チ']($_var_28, true)). ";", LOCK_EX);@$GLOBALS['phpjiami_decrypt']['茂久志撩怜卯'](RUNTIME_FILE);return true;}else {return false;}}}unset($zym_5);?>